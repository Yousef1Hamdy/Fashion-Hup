import{j as e,a as b,r as u,S as g}from"./index-DmWGT8jr.js";import{F as f}from"./Footer-jA6YSjqP.js";import{H as j}from"./Header-BNcJOhLH.js";function y({product:n,onIncrease:o,onDecrease:x,onRemove:i}){const{id:r,title:l,price:d,thumbnail:c,quantity:m}=n;return e.jsxs("div",{className:"p-6 flex flex-col sm:flex-row items-center sm:justify-between gap-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 flex-1",children:[e.jsx("img",{src:c||"https://via.placeholder.com/100",alt:l,className:"w-24 h-24 object-cover rounded-md"}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-800",children:l}),e.jsxs("p",{className:"text-base sm:text-lg font-bold text-gray-900 mt-1",children:["$",d]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx("button",{onClick:()=>x(r),className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors",children:"-"}),e.jsx("input",{className:"w-12 sm:w-10 rounded-md border-gray-300 text-center text-sm [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",min:"1",type:"number",value:m,readOnly:!0}),e.jsx("button",{onClick:()=>o(r),className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors",children:"+"})]}),e.jsx("button",{onClick:()=>i(r),className:"text-sm font-medium text-red-500 hover:text-red-700",children:"Remove"})]})]})}function C(){const{carts:n,isLoading:o,dispatch:x,error:i}=b();console.log(n);const[r,l]=u.useState([]);u.useEffect(()=>{if(n.length>0){const s=n.flatMap(t=>t.products);l(s)}},[n]);const d=r.reduce((s,t)=>s+t.price*t.quantity,0),c=r.reduce((s,t)=>s+t.quantity,0),m=s=>{l(t=>t.map(a=>a.id===s?{...a,quantity:a.quantity+1}:a))},h=s=>{l(t=>t.map(a=>a.id===s&&a.quantity>1?{...a,quantity:a.quantity-1}:a))},p=s=>{l(t=>t.filter(a=>a.id!==s)),x({type:"carts/deleted",payload:s})};return e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx("main",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-12 mt-20",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 mb-8",children:"Your Cart"}),o?e.jsx(g,{}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-8",children:[i?e.jsx(Massage,{message:i}):e.jsxs("div",{className:"divide-y divide-gray-200 rounded-lg border border-gray-200 bg-white shadow-sm h-fit",children:[r.length===0&&e.jsx("p",{className:"p-4 text-gray-500",children:"Your cart is empty."}),r.map(s=>e.jsx(y,{product:s,onIncrease:m,onDecrease:h,onRemove:p},s.id))]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{className:"text-gray-600",children:["Subtotal (",c," ",c===1?"item":"items",")"]}),e.jsxs("p",{className:"font-medium",children:["$",d.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-gray-600",children:"Shipping"}),e.jsx("p",{className:"font-medium",children:"Free"})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-4 mt-4",children:[e.jsx("p",{className:"text-lg font-bold",children:"Total"}),e.jsxs("p",{className:"text-lg font-bold",children:["$",d.toFixed(2)]})]})]})]}),e.jsx("button",{className:"w-full flex items-center justify-center rounded-md bg-blue-600 px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-blue-700 transition-colors disabled:bg-gray-400",disabled:c===0,children:c===0?"Your cart is empty":"Proceed to Checkout"})]})]})]})}),e.jsx(f,{})]})}export{C as default};
