import{c as N,a as u,r as i,j as e}from"./index-DMPQbt8I.js";import{H as v}from"./Header-BmQcNp9L.js";import{F as A}from"./Footer-Cxkuhd8W.js";import{M as C}from"./Massage-Z0ZvD6e6.js";function k({product:s}){const{id:t,title:o,price:h,images:f,category:g}=s,{user:d}=N(),{addCart:p,dispatch:j,carts:n}=u(),[l,c]=i.useState(!1),[m,x]=i.useState(!1),a=i.useMemo(()=>n.some(r=>r.products?.some(b=>b.id===t)),[n,t]);async function w(){if(!d?.id){alert("Please login to add products to your cart.");return}if(!a){c(!0);try{await p({userId:d.id,products:[{id:s.id,quantity:1}]}),x(!0),setTimeout(()=>x(!1),2e3)}catch(r){console.error("Failed to add cart:",r),alert("Something went wrong. Please try again.")}finally{c(!1)}}}function y(){j({type:"wish/deleted",payload:t})}return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 rounded-md border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("img",{src:f?.[0],alt:o,className:"w-full sm:w-32 h-32 flex-shrink-0 rounded-md object-cover mx-auto sm:mx-0"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:o}),e.jsx("p",{className:"text-sm text-slate-500",children:g})]}),e.jsx("button",{onClick:y,className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("p",{className:"text-lg font-bold text-slate-900",children:["$",h]}),e.jsxs("button",{onClick:w,disabled:l||m||a,className:`flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium w-full sm:w-auto
              ${a?"bg-green-600 text-white cursor-not-allowed":l?"bg-blue-600 text-white opacity-90":"bg-slate-900 text-white hover:bg-slate-800"}
            `,children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:a?"check":"add_shopping_cart"}),a?"Already in Cart":l?"Adding...":m?"Added âœ…":"Add to Cart"]})]})]})]})}function S(){const{wishList:s}=u();return console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx("main",{className:"flex-1 px-10 py-12 mt-20",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-slate-900",children:"Your Wishlist"}),e.jsx("p",{className:"mt-2 text-slate-500",children:"A collection of your favorite items. Ready to make them yours?"}),e.jsx("div",{className:"mt-8 grid grid-cols-1 gap-8",children:s.length>0?e.jsx(e.Fragment,{children:s.map(t=>e.jsx(k,{product:t},t.id))}):e.jsx(C,{massage:"no product in wish"})})]})}),e.jsx(A,{})]})}export{S as default};
